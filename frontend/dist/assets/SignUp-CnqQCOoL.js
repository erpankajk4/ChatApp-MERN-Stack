import{j as e,r as x,u as m,_ as i,L as p}from"./index-G-vctej9.js";const b=({onCheckboxChange:s,selectedGender:a})=>e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:`label gap-2 cursor-pointer ${a==="male"?"selected":""} `,children:[e.jsx("span",{className:"label-text",children:"Male"}),e.jsx("input",{type:"checkbox",className:"checkbox border-slate-900",checked:a==="male",onChange:()=>s("male")})]})}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:`label gap-2 cursor-pointer  ${a==="female"?"selected":""}`,children:[e.jsx("span",{className:"label-text",children:"Female"}),e.jsx("input",{type:"checkbox",className:"checkbox border-slate-900",checked:a==="female",onChange:()=>s("female")})]})})]}),f=()=>{const[s,a]=x.useState(!1),{setAuthUser:t}=m();return{loading:s,signup:async({fullName:r,username:c,password:l,confirmPassword:d,gender:u})=>{if(j({fullName:r,username:c,password:l,confirmPassword:d,gender:u})){a(!0);try{const o=await(await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:r,username:c,password:l,confirmPassword:d,gender:u})})).json();if(o.error)throw new Error(o.error);localStorage.setItem("chat-user",JSON.stringify(o)),t(o)}catch(h){i.error(h.message)}finally{a(!1)}}}}};function j({fullName:s,username:a,password:t,confirmPassword:n,gender:r}){return!s||!a||!t||!n||!r?(i.error("Please fill in all fields"),!1):t!==n?(i.error("Passwords do not match"),!1):t.length<6?(i.error("Password must be at least 6 characters"),!1):!0}const v=()=>{const[s,a]=x.useState({fullName:"",username:"",password:"",confirmPassword:"",gender:""}),{loading:t,signup:n}=f(),r=l=>{a({...s,gender:l})},c=async l=>{l.preventDefault(),await n(s)};return e.jsx("div",{className:"flex flex-col items-center justify-center min-w-96 mx-auto",children:e.jsxs("div",{className:"w-full p-6 rounded-md shadow-md bg-zinc-700",children:[e.jsx("h1",{className:"text-3xl font-semibold text-center text-green-500 text-gray-300",children:"ChatApp"}),e.jsx("h4",{className:"text-3xl font-semibold text-center text-gray-300",children:"Create Account"}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{children:[e.jsx("label",{className:"label p-2",children:e.jsx("span",{className:"text-base label-text",children:"Full Name"})}),e.jsx("input",{type:"text",placeholder:"Enter Your Name",className:"w-full input input-bordered  h-10",value:s.fullName,onChange:l=>a({...s,fullName:l.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label p-2 ",children:e.jsx("span",{className:"text-base label-text",children:"Username"})}),e.jsx("input",{type:"text",placeholder:"Enter Your Username",className:"w-full input input-bordered h-10",value:s.username,onChange:l=>a({...s,username:l.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"text-base label-text",children:"Password"})}),e.jsx("input",{type:"password",placeholder:"Enter Password",className:"w-full input input-bordered h-10",value:s.password,onChange:l=>a({...s,password:l.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"text-base label-text",children:"Confirm Password"})}),e.jsx("input",{type:"password",placeholder:"Confirm Password",className:"w-full input input-bordered h-10",value:s.confirmPassword,onChange:l=>a({...s,confirmPassword:l.target.value})})]}),e.jsx(b,{onCheckboxChange:r,selectedGender:s.gender}),e.jsx(p,{to:"/login",className:"text-sm hover:underline hover:text-blue-200 mt-2 inline-block",href:"#",children:"Already have an account?"}),e.jsx("div",{children:e.jsx("button",{className:"btn btn-block btn-sm mt-2 border border-slate-700",disabled:t,children:t?e.jsx("span",{className:"loading loading-spinner"}):"Sign Up"})})]})]})})};export{v as default};
