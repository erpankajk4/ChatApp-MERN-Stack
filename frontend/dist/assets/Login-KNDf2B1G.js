import{r as i,u as x,_ as u,j as e,L as h}from"./index-e_hV2o9p.js";const m=()=>{const[t,n]=i.useState(!1),{setAuthUser:r}=x();return{loading:t,login:async(a,l)=>{if(p(a,l)){n(!0);try{const o=await(await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:l})})).json();if(o.error)throw new Error(o.error);localStorage.setItem("chat-user",JSON.stringify(o)),r(o)}catch(s){u.error(s.message)}finally{n(!1)}}}}};function p(t,n){return!t||!n?(u.error("Please fill in all fields"),!1):!0}const f=()=>{const[t,n]=i.useState(""),[r,c]=i.useState(""),{loading:a,login:l}=m(),d=async s=>{s.preventDefault(),await l(t,r)};return e.jsx("div",{className:"flex flex-col items-center justify-center min-w-96 mx-auto bg-zinc-700 rounded-md",children:e.jsxs("div",{className:"w-full p-6 rounded-lg shadow-md",children:[e.jsx("h1",{className:"text-3xl font-semibold text-center text-green-500 text-gray-300",children:"ChatApp"}),e.jsx("h4",{className:"text-3xl font-semibold text-center text-gray-300",children:"Login"}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{children:[e.jsx("label",{className:"label p-2",children:e.jsx("span",{className:"text-base label-text",children:"Username"})}),e.jsx("input",{type:"text",placeholder:"Enter username",className:"w-full input input-bordered h-10",value:t,onChange:s=>n(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"text-base label-text",children:"Password"})}),e.jsx("input",{type:"password",placeholder:"Enter Password",className:"w-full input input-bordered h-10",value:r,onChange:s=>c(s.target.value)})]}),e.jsxs(h,{to:"/signup",className:"text-sm  hover:underline hover:text-blue-200 mt-2 inline-block",children:["Don't"," have an account?"]}),e.jsx("div",{children:e.jsx("button",{className:"btn btn-block btn-sm mt-2",disabled:a,children:a?e.jsx("span",{className:"loading loading-spinner "}):"Login"})})]})]})})};export{f as default};
